$(document).ready(function () {
	const $body = $('body');
	let $popularCategories = $("#popular-categories");
	var restrictionWidth = 1024;
	$popularCategories.on('initialized.owl.carousel', function () {
		if ($body.width() < restrictionWidth) {
			$popularCategories.addClass("first-item-margin-left_popularCategories");
		}
	});

	$popularCategories.on('translated.owl.carousel', function () {
		if ($body.width() >= restrictionWidth) {
			return;
		} else {
			if ($firstItemPopularCategories.hasClass("active")) {
				$popularCategories.addClass("first-item-margin-left_popularCategories");
				$popularCategories.removeClass("popular-categories-invisibleBefore");
			} else {
				$popularCategories.removeClass("first-item-margin-left_popularCategories");
				$popularCategories.addClass("popular-categories-invisibleBefore");
			};

			if ($lastItemPopularCategories.hasClass("active")) {
				$popularCategories.addClass("popular-categories-invisibleAfter");
			} else {
				$popularCategories.removeClass("popular-categories-invisibleAfter")
			}
		}
	});

	$popularCategories.on("resize.owl.carousel", function () {
		if ($body.width() >= restrictionWidth) {
			$popularCategories.removeClass("first-item-margin-left_popularCategories");
			$popularCategories.removeClass("popular-categories-invisibleBefore");
			$popularCategories.addClass("popular-categories-invisibleAfter");
			return;
		} else {
			if ($firstItemPopularCategories.hasClass("active")) {
				$popularCategories.addClass("first-item-margin-left_popularCategories");
				$popularCategories.removeClass("popular-categories-invisibleBefore");
			} else {
				$popularCategories.removeClass("first-item-margin-left_popularCategories");
				$popularCategories.addClass("popular-categories-invisibleBefore");
			};

			if ($lastItemPopularCategories.hasClass("active")) {
				$popularCategories.addClass("popular-categories-invisibleAfter");
			} else {
				$popularCategories.removeClass("popular-categories-invisibleAfter")
			}
		}
	});

	$popularCategories.owlCarousel(
		{
			responsive: {
				0: {
					dots: false,
					items: 3,
					margin: 10
				},
				768: {
					items: 4,
					margin: 15,
					nav: false
				},
				1024: {
					items: 4,
					margin: 24,
					nav: true
				}
			},
		}
	);

	var $firstItemPopularCategories = $("#popular-categories .owl-item:first-child");
	var $lastItemPopularCategories = $("#popular-categories .owl-item:last-child");



	// !----------------------------------------------

	let popularProducts = $("#popular-products")
	popularProducts.owlCarousel(
		{
			nav: true,
			loop: true,
			autoplay: true,
			autoplayTimeout: 3000,
			autoplayHoverPause: true,
			responsive: {
				0: {
					items: 2,
					margin: 10
				},
				768: {
					items: 3,
					margin: 15
				},
				1000: {
					items: 4,
					margin: 24,
				}
			}
		}
	);

	// скролл колёсиком мыши
	// popularProducts.on('mousewheel', '.owl-stage', function (e) {
	// 	if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {
	// 		popularProducts.trigger('next.owl');
	// 	} else {
	// 		popularProducts.trigger('prev.owl');
	// 	}
	// 	e.preventDefault();
	// });

	// !-----------------------------------------------

	let $typesInstrument = $("#types-instrument");

	$typesInstrument.on('initialized.owl.carousel', function () {
		if ($body.width() < restrictionWidth) {
			$typesInstrument.addClass("first-item-margin-left_typesInstrument");
		}
	});

	$typesInstrument.on('translated.owl.carousel', function () {
		if ($body.width() >= restrictionWidth) {
			return;
		} else {
			if ($firstItemTypesInstrument.hasClass("active")) {
				$typesInstrument.addClass("first-item-margin-left_typesInstrument");
				$typesInstrument.removeClass("types-instrument-invisibleBefore");
			} else {
				$typesInstrument.removeClass("first-item-margin-left_typesInstrument");
				$typesInstrument.addClass("types-instrument-invisibleBefore");
			};

			if ($lastItemTypesInstrument.hasClass("active")) {
				$typesInstrument.addClass("types-instrument-invisibleAfter");
			} else {
				$typesInstrument.removeClass("types-instrument-invisibleAfter")
			}
		}
	});

	$typesInstrument.on("resize.owl.carousel", function () {
		if ($body.width() >= restrictionWidth) {
			$typesInstrument.removeClass("first-item-margin-left_typesInstrument");
			$typesInstrument.removeClass("types-instrument-invisibleBefore");
			$typesInstrument.removeClass("types-instrument-invisibleAfter")
			return;
		} else {
			if ($firstItemTypesInstrument.hasClass("active")) {
				$typesInstrument.addClass("first-item-margin-left_typesInstrument");
				$typesInstrument.removeClass("types-instrument-invisibleBefore");
			} else {
				$typesInstrument.removeClass("first-item-margin-left_typesInstrument");
				$typesInstrument.addClass("types-instrument-invisibleBefore");
			};

			if ($lastItemTypesInstrument.hasClass("active")) {
				$typesInstrument.addClass("types-instrument-invisibleAfter");
			} else {
				$typesInstrument.removeClass("types-instrument-invisibleAfter")
			}
		}
	})

	$typesInstrument.owlCarousel(
		{
			responsive: {
				0: {
					dots: false,
					items: 4,
					margin: 8,
					nav: false
				},
				768: {
					items: 4,
					margin: 15,

				},
				1024: {
					items: 4,
					nav: true

				},
				1225: {
					items: 5,
					margin: 24,
					nav: true
				}
			},
		}
	);

	var $firstItemTypesInstrument = $("#types-instrument .owl-item:first-child");
	var $lastItemTypesInstrument = $("#types-instrument .owl-item:last-child");
});